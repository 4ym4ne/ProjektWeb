<!DOCTYPE html>
<html>
<meta charset="UTF-8">
<head>
    <title>Balkendiagramm Stromverbrauch</title>
    <style>

        .bar {
            fill: green;
        }
        .bar:hover {
            fill: rgba(59, 53, 141, 0.66);
        }
        .axis-label {
            font: 20px Arial;
        }
    </style>
</head>
<body>
<h3>Datenkategorie: Realisierter Stromverbrauch MWh</h3>
<p>Zeitraum: 09.12.2023, 00:00 - 09.12.2023, 02:15</p>
<p>Auflösung: Viertelstunde</p>
<svg width="600" height="400"></svg>

<script src="https://d3js.org/d3.v5.min.js"></script>
<script>
    // Die JSON-Daten
    const data = [
        {"Datum":"09.12.2023","Anfang":"00:00","Ende":"00:15","GesamtNetzlastMWh":12219.75,"ResiduallastMWh":8911.5,"PumpspeicherMWh":150.0},
        {"Datum":"09.12.2023","Anfang":"00:15","Ende":"00:30","GesamtNetzlastMWh":12065.25,"ResiduallastMWh":8661.75,"PumpspeicherMWh":185.75},
        {"Datum":"09.12.2023","Anfang":"00:30","Ende":"00:45","GesamtNetzlastMWh":11971.0,"ResiduallastMWh":8398.25,"PumpspeicherMWh":185.0},
        {"Datum":"09.12.2023","Anfang":"00:45","Ende":"01:00","GesamtNetzlastMWh":11889.5,"ResiduallastMWh":8228.25,"PumpspeicherMWh":247.0},
        {"Datum":"09.12.2023","Anfang":"01:00","Ende":"01:15","GesamtNetzlastMWh":11596.5,"ResiduallastMWh":7957.75,"PumpspeicherMWh":105.75},
        {"Datum":"09.12.2023","Anfang":"01:15","Ende":"01:30","GesamtNetzlastMWh":11547.5,"ResiduallastMWh":7918.25,"PumpspeicherMWh":116.5},
        {"Datum":"09.12.2023","Anfang":"01:30","Ende":"01:45","GesamtNetzlastMWh":11445.0,"ResiduallastMWh":7748.75,"PumpspeicherMWh":135.0},
        {"Datum":"09.12.2023","Anfang":"01:45","Ende":"02:00","GesamtNetzlastMWh":11342.75,"ResiduallastMWh":7594.75,"PumpspeicherMWh":189.25},
        {"Datum":"09.12.2023","Anfang":"02:00","Ende":"02:15","GesamtNetzlastMWh":11187.75,"ResiduallastMWh":7399.5,"PumpspeicherMWh":56.25},
        {"Datum":"09.12.2023","Anfang":"02:15","Ende":"02:30","GesamtNetzlastMWh":11180.0,"ResiduallastMWh":7319.25,"PumpspeicherMWh":71.5}
    ];

    // SVG-Größen und -Margen
    const margin = {top: 20, right: 20, bottom: 30, left: 40},
        width = 700 - margin.left - margin.right,
        height = 400 - margin.top - margin.bottom;

    // Erstellen Sie eine SVG-Gruppe mit den Margen
    const svg = d3.select("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .append("g")
        .attr("transform",
            "translate(" + margin.left + "," + margin.top + ")");

    // X- und Y-Skalierungsfunktionen
    const x = d3.scaleBand()
        .range([0, width])
        .padding(0.1);
    const y = d3.scaleLinear()
        .range([height, 0]);

    // Skalierung der Achsen
    x.domain(data.map(d => d.Anfang));
    y.domain([0, d3.max(data, d => d.GesamtNetzlastMWh)]);

    // Erstellen der X-Achse
    svg.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x))
        .append("text")
        .attr("y", margin.bottom - 10)
        .attr("x", width / 2)
        .attr("text-anchor", "end")
        .attr("stroke", "black")
        .text("Zeit");

    // Erstellen der Y-Achse
    svg.append("g")
        .call(d3.axisLeft(y))
        .append("text")
        .attr("transform", "rotate(-90)")
        .attr("y", 6)
        .attr("dy", "-5.1em")
        .attr("text-anchor", "end")
        .attr("stroke", "black")
        .text("Verbrauch (MWh)");

    // Erstellen der Balken
    svg.selectAll(".bar")
        .data(data)
        .enter().append("rect")
        .attr("class", "bar")
        .attr("x", d => x(d.Anfang))
        .attr("width", x.bandwidth())
        .attr("y", d => y(d.GesamtNetzlastMWh))
        .attr("height", d => height - y(d.GesamtNetzlastMWh));
</script>
</body>
</html>